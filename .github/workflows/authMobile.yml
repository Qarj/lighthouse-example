name: Auth Mobile
on:
    push:
    pull_request:
    schedule:
        - cron: "6 2 * * *"
jobs:
    lighthouse:
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v2

            - name: Install puppeteer
              run: npm install --save puppeteer

            - name: Auth Mobile
              uses: treosh/lighthouse-ci-action@v9
              with:
                  urls: |
                      https://www.totaljobs.com/membersarea
                      https://www.totaljobs.com/jobs/driver
                      https://www.totaljobs.com/job/0
                      https://www.totaljobs.com/authenticated/default.aspx
                  budgetPath: ".github/lighthouse/budget.json"
                  configPath: ".lighthouserc.js"
                  uploadArtifacts: true
                  temporaryPublicStorage: true

            - name: Archive screenshots
              if: always()
              uses: actions/upload-artifact@v2
              with:
                  name: screenshots
                  path: "*.png"
